{% extends 'admin/base.html.twig' %}


{% block title %} Gestion des catégories {% endblock %}

{% block body %}
	<div class="container-fluid h-100 my-4">
		<div class="row h-100">
			{% include 'admin/partials/aside.html.twig' %}
			<main	class="col">
				<!-- Insérez ici le contenu principal du site ou de l'application -->
				<div class="container">

					<div class="row">
                        <div class="col-md-auto mb-4">

                            <h2 class="ml-3 mt-4">
                                Les Sous-Catégories
                            </h2>

                            <section class="categories">

                                <div class="container-fluid">
                                    <h2 class="my-5">Gestion des sous-catégories</h2>
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Id</th>
                                                <th>Nom de la catégorie</th>
                                                <th>Catégorie parente</th>
                                                <th>Image</th>
                                                <th class="text-center w-25">Introduction</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            {% if categories is defined %}
                                                {% for category in categories %}


                                                    <tr>
                                                        <td>{{category.id}}</td>
                                                        <td>{{category.name}}</td>
                                                        <td>{{category.parent.name}}</td>
                                                        <td>
                                                            <img src="{{category.image}}" alt="Image de {{category.name}}" class="miniature">
                                                        </td>
                                                        <td class="text-center w-25">
                                                            {{category.introduction}}
                                                        </td>
                                                        <td>
                                                            {# id : la variable vient de la route @Route("/{id}/edit", name="categoryForm", methods={"POST"}) #}
                                                            <a href="{{ path('productForm', {id : category.id, type : 'category'}) }}" class="btn btn-secondary">
                                                                <i class="fas fa-plus"></i>
                                                            </a>
                                                            {# id : la variable vient de la route @Route("/{id}/edit", name="categoryForm", methods={"POST"}) #}
                                                            <a href="{{ path('subCategoryForm', {'id': category.id})}}" class="btn btn-primary">
                                                                <i class="fas fa-edit"></i>
                                                            </a>
                                                            <!--a href="{#{ path('deleteCategory', {'id': category.id})}#}" class="btn btn-danger">
                                                                <i class="fas fa-trash"></i>
                                                            </a-->
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
{% endblock %}